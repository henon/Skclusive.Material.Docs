@namespace Skclusive.Material.Docs.App.View

<List
    Component="nav"
    aria-label="main mailbox folders"
    Class="demo-list-root">
    <SubheaderContent>
        <ListSubheader
            Component="div"
            Id="nested-list-subheader">
            Nested List Items
        </ListSubheader>
    </SubheaderContent>
    <ChildContent>
        <ListItem
            Button
            Selected="@(SelectedIndex == 0)"
            OnClick="@((_) => OnSelect(0))">
            <ListItemIcon>
                <SendIcon />
            </ListItemIcon>
            <ListItemText
                Primary="Sent mail" />
        </ListItem>
        <ListItem
            Button
            Selected="@(SelectedIndex == 1)"
            OnClick="@((_) => OnSelect(1))">
            <ListItemIcon>
                <DraftsIcon />
            </ListItemIcon>
            <ListItemText
                Primary="Drafts" />
        </ListItem>
        <ListItem
            Button
            Selected="@(SelectedIndex == 2)"
            OnClick="@((_) => OnSelect(2))">
            <ListItemIcon>
                <InboxIcon />
            </ListItemIcon>
            <ListItemText
                Primary="Inbox" />
            @if (Open)
            {
                <ExpandLessIcon />
            } else
            {
                <ExpandMoreIcon />
            }
        </ListItem>
        @if (Open)
        {
            <List
                Component="div"
                DisablePadding>
                <ListItem
                    Button
                    Style="padding-left: 32px"
                    Selected="@(SelectedIndex == 3)"
                    OnClick="@((_) => OnSelect(3))">
                    <ListItemIcon>
                        <StarBorderIcon />
                    </ListItemIcon>
                    <ListItemText
                        Primary="Starred" />
                </ListItem>
            </List>
        }
    </ChildContent>
</List>

@code
{
    private bool Open { set; get; } = false;

    private int SelectedIndex { set; get; } = 0;

    private void OnSelect(int selectedIndex)
    {
        SelectedIndex = selectedIndex;

        if (SelectedIndex == 2)
        {
            Open = !Open;
        }

        StateHasChanged();
    }
}